[package]
name = "mopro-ffi"
version = "0.1.1"
edition = "2021"
description = "Mopro is a toolkit for ZK app development on mobile. Mopro makes client-side proving on mobile simple."
license = "MIT OR Apache-2.0"
repository = "https://github.com/zkmopro/mopro"
documentation = "https://zkmopro.org/"
homepage = "https://zkmopro.org/"
exclude = ["target/*"]

[lib]
name = "mopro_ffi"

[features]
default = []

halo2 = []
circom = [
    "rustwitness",
    "arkworks",
    "ark-bn254",
    "ark-bls12-381",
    "ark-ff",
]
nova-scotia = [
    "dep:nova-scotia",
    "serde_json",
    "nova-snark",
    "pasta_curves"
]

# circom features
## witness
rustwitness = ["circom-prover/rustwitness", "rust-witness"]
witnesscalc = ["circom-prover/witnesscalc", "witnesscalc-adapter"]
## proof
arkworks = ["circom-prover/arkworks"]
rapidsnark = ["circom-prover/rapidsnark"]
## include all circom features
circom-all = ["rustwitness", "witnesscalc", "arkworks", "rapidsnark"]



[dependencies]
uniffi = { workspace = true, features = ["build", "cargo-metadata", "bindgen"] }
serde = { version = "1.0", features = ["derive"] }
anyhow = "1.0.86"
bincode = "1.3.3"
num-bigint = { version = "0.4.3", default-features = false, features = [
    "rand",
] }

# Error handling
thiserror = "=2.0.3"
color-eyre = "=0.6.2"

# circom deps
rust-witness = { version = "0.1", optional = true }
witnesscalc-adapter = { version = "0.1", optional = true }
ark-ff = { version = "0.4.0", optional = true }
circom-prover = { path = "../circom-prover", optional = true}

# ZKP generation
ark-bn254 = { version = "=0.4.0", optional = true }
uuid = { version = "1.9.1", features = ["v4"] }
ark-bls12-381 = { version = "0.4.0", optional = true }
camino = "1.1.9"

# Nova Scotia dependencies
nova-scotia = { version = "0.5.0", optional = true }
nova-snark = { version = "0.23.0", optional = true }
serde_json = { version = "1.0.85", optional = true }
pasta_curves = { version = "0.5", optional = true }

[build-dependencies]
rust-witness = { version = "0.1", optional = true }
uniffi = { workspace = true, features = ["build"] }
witnesscalc-adapter = { version = "0.1", optional = true }

[dev-dependencies]
color-eyre = "0.6"
serde = { version = "1.0", features = ["derive"] }
serde_derive = "1.0"
serde_json = "1.0.94"

# Halo2 dependencies
halo2-fibonacci = { git = "https://github.com/ElusAegis/halo2-fibonacci-sample.git" }
plonk-fibonacci = { workspace = true }
hyperplonk-fibonacci = { workspace = true }
gemini-fibonacci = { workspace = true }
